#include <Stepper.h>
#include <ESP32Servo.h>

const int stepsPerRevolution = 2038;

Stepper stepper = Stepper(stepsPerRevolution, 14, 26, 27, 25);
int currentRotation = 0;

Servo servo;
const int SERVO_OFFSET = 0; // Extra degrees past 180 to point straight back to center (should be a negative or zero quantity)

const int ledPins[] = {33, 32, 2}; // R, G, B
const int pwmCh[] = {5, 6, 7};
int red = 255;
int green = 0;
int blue = 255;

double r1 = 8.89; // cm
double r2 = 9.85; // cm
double maxrad = r1 + r2 - 0.1; // cm (small tolerance provided)

void setup() {
  //Serial.begin(9600);
  stepper.setSpeed(15);

  for (int i = 0; i < 3; i++) {
    ledcSetup(pwmCh[i], 1000, 8);
    ledcAttachPin(ledPins[i], pwmCh[i]);
  }

  servo.setPeriodHertz(50);
  servo.attach(15, 500, 2500); // This will find an unused PWM channel to attach to
}

void stepper_move(int steps) {
  currentRotation += steps;
  stepper.step(steps);
}

void stepper_to_angle(double angle) { // Calculated with acos, so should remain bounded
  stepper_move((int) (stepsPerRevolution*(angle/360.0) - currentRotation));
}

void combo_move(double th1, double th2) {
  stepper_to_angle(th1);
  servo.write((int) th2);
}

void setColor(byte r, byte g, byte b) {
  ledcWrite(pwmCh[0], 255 - r);
  ledcWrite(pwmCh[1], 255 - g);
  ledcWrite(pwmCh[2], 255 - b);
}

void move_to_polar(double rad, double ang) {
  rad *= maxrad;
  if (rad == 0) // Avoid divide-by-zero issues
    rad = 0.001;
  double theta1 = acos((r1*r1+rad*rad-r2*r2)/(2*r1*rad));
  double theta2 = acos((r1*r1+r2*r2-rad*rad)/(2*r1*r2));
  theta1 *= 180.0 / PI;
  theta2 *= 180.0 / PI;
  theta1 = ang - theta1;
  theta2 = 180 + SERVO_OFFSET - theta2;
  //stepper_to_angle(theta1);
  //servo.write((int)theta2);
  combo_move(theta1, theta2);
  //Serial.print(theta1);
  //Serial.print("  ");
  //Serial.println(theta2);

  doarc(10, -180, 133, 141, 98);
doarc(10, -175, 230, 195, 95);
doarc(10, -170, 245, 212, 115);
doarc(10, -165, 249, 228, 138);
doarc(10, -160, 191, 156, 68);
doarc(10, -155, 179, 142, 63);
doarc(10, -150, 125, 86, 31);
doarc(10, -145, 119, 89, 53);
doarc(10, -140, 64, 37, 24);
doarc(10, -135, 29, 13, 17);
doarc(10, -130, 25, 8, 16);
doarc(10, -125, 27, 15, 25);
doarc(10, -120, 38, 28, 43);
doarc(10, -115, 41, 29, 41);
doarc(10, -110, 76, 82, 61);
doarc(10, -105, 40, 47, 36);
doarc(10, -100, 64, 76, 62);
doarc(10, -95, 45, 64, 48);
doarc(10, -90, 77, 78, 50);
doarc(10, -85, 51, 59, 35);
doarc(10, -80, 88, 86, 61);
doarc(10, -75, 79, 82, 59);
doarc(10, -70, 62, 63, 45);
doarc(10, -65, 58, 34, 37);
doarc(10, -60, 61, 20, 23);
doarc(10, -55, 76, 49, 56);
doarc(10, -50, 45, 19, 28);
doarc(10, -45, 60, 36, 38);
doarc(10, -40, 59, 31, 30);
doarc(10, -35, 51, 28, 20);
doarc(10, -30, 171, 140, 75);
doarc(10, -25, 181, 145, 72);
doarc(10, -20, 235, 197, 100);
doarc(10, -15, 245, 206, 105);
doarc(10, -10, 235, 192, 90);
doarc(10, -5, 227, 189, 90);
doarc(10, 0, 110, 118, 75);
led_on();
doarc(10, 5, 88, 57, 37);
doarc(10, 10, 83, 51, 27);
doarc(10, 15, 104, 69, 34);
doarc(10, 20, 208, 167, 75);
doarc(10, 25, 219, 180, 79);
doarc(10, 30, 239, 204, 112);
doarc(10, 35, 226, 186, 97);
doarc(10, 40, 197, 153, 63);
doarc(10, 45, 122, 76, 30);
doarc(10, 50, 189, 145, 69);
doarc(10, 55, 223, 176, 94);
doarc(10, 60, 49, 17, 25);
doarc(10, 65, 73, 41, 35);
doarc(10, 70, 100, 94, 77);
doarc(10, 75, 70, 68, 44);
doarc(10, 80, 95, 95, 69);
doarc(10, 85, 76, 83, 58);
doarc(10, 90, 88, 91, 59);
doarc(10, 95, 69, 84, 68);
doarc(10, 100, 91, 97, 85);
doarc(10, 105, 54, 54, 40);
doarc(10, 110, 30, 31, 21);
doarc(10, 115, 27, 19, 28);
doarc(10, 120, 40, 27, 37);
doarc(10, 125, 22, 13, 30);
doarc(10, 130, 35, 18, 29);
doarc(10, 135, 41, 18, 24);
doarc(10, 140, 97, 63, 32);
doarc(10, 145, 156, 118, 57);
doarc(10, 150, 142, 103, 38);
doarc(10, 155, 128, 87, 26);
doarc(10, 160, 110, 66, 20);
doarc(10, 165, 88, 57, 36);
doarc(10, 170, 120, 90, 69);
doarc(10, 175, 85, 54, 35);
doarc(10, 180, 133, 141, 98);
led_off();
doarc(9, -180, 130, 137, 84);
doarc(9, -175, 200, 164, 70);
doarc(9, -170, 224, 185, 95);
doarc(9, -165, 167, 131, 40);
doarc(9, -160, 216, 181, 89);
doarc(9, -155, 206, 172, 84);
doarc(9, -150, 190, 157, 77);
doarc(9, -145, 108, 71, 27);
doarc(9, -140, 81, 50, 38);
doarc(9, -135, 30, 10, 14);
doarc(9, -130, 47, 30, 38);
doarc(9, -125, 25, 8, 19);
doarc(9, -120, 33, 20, 29);
doarc(9, -115, 48, 33, 30);
doarc(9, -110, 76, 80, 56);
doarc(9, -105, 53, 60, 42);
doarc(9, -100, 75, 89, 68);
doarc(9, -95, 80, 92, 66);
doarc(9, -90, 72, 68, 49);
doarc(9, -85, 68, 65, 44);
doarc(9, -80, 63, 55, 35);
doarc(9, -75, 60, 56, 31);
doarc(9, -70, 70, 75, 50);
doarc(9, -65, 93, 72, 55);
doarc(9, -60, 61, 32, 34);
doarc(9, -55, 72, 22, 25);
doarc(9, -50, 55, 20, 26);
doarc(9, -45, 28, 6, 19);
doarc(9, -40, 49, 25, 28);
doarc(9, -35, 50, 29, 28);
doarc(9, -30, 101, 73, 59);
doarc(9, -25, 219, 182, 102);
doarc(9, -20, 220, 189, 100);
doarc(9, -15, 239, 201, 101);
doarc(9, -10, 253, 223, 126);
doarc(9, -5, 251, 222, 130);
doarc(9, 0, 126, 130, 80);
led_on();
doarc(9, 5, 73, 44, 11);
doarc(9, 10, 94, 58, 29);
doarc(9, 15, 114, 75, 34);
doarc(9, 20, 219, 183, 93);
doarc(9, 25, 212, 175, 72);
doarc(9, 30, 206, 165, 75);
doarc(9, 35, 233, 192, 104);
doarc(9, 40, 219, 176, 105);
doarc(9, 45, 187, 145, 70);
doarc(9, 50, 111, 69, 39);
doarc(9, 55, 64, 30, 31);
doarc(9, 60, 71, 21, 16);
doarc(9, 65, 114, 99, 57);
doarc(9, 70, 72, 72, 46);
doarc(9, 75, 96, 89, 63);
doarc(9, 80, 85, 84, 55);
doarc(9, 85, 80, 84, 62);
doarc(9, 90, 92, 102, 76);
doarc(9, 95, 90, 102, 64);
doarc(9, 100, 79, 98, 69);
doarc(9, 105, 70, 74, 49);
doarc(9, 110, 86, 90, 60);
doarc(9, 115, 90, 105, 82);
doarc(9, 120, 19, 4, 18);
doarc(9, 125, 31, 17, 28);
doarc(9, 130, 18, 8, 28);
doarc(9, 135, 21, 9, 22);
doarc(9, 140, 32, 11, 24);
doarc(9, 145, 62, 37, 40);
doarc(9, 150, 60, 33, 28);
doarc(9, 155, 69, 42, 29);
doarc(9, 160, 46, 21, 14);
doarc(9, 165, 59, 37, 26);
doarc(9, 170, 29, 15, 14);
doarc(9, 175, 85, 65, 38);
doarc(9, 180, 130, 137, 84);
led_off();
doarc(8, -180, 114, 124, 73);
doarc(8, -175, 210, 170, 74);
doarc(8, -170, 218, 180, 86);
doarc(8, -165, 204, 168, 73);
doarc(8, -160, 180, 138, 52);
doarc(8, -155, 118, 78, 7);
doarc(8, -150, 141, 100, 24);
doarc(8, -145, 84, 43, 25);
doarc(8, -140, 38, 12, 13);
doarc(8, -135, 31, 15, 25);
doarc(8, -130, 11, 4, 12);
doarc(8, -125, 16, 8, 16);
doarc(8, -120, 52, 40, 43);
doarc(8, -115, 71, 83, 64);
doarc(8, -110, 28, 50, 27);
doarc(8, -105, 50, 62, 37);
doarc(8, -100, 106, 113, 72);
doarc(8, -95, 68, 76, 47);
doarc(8, -90, 35, 35, 23);
doarc(8, -85, 62, 65, 47);
doarc(8, -80, 60, 65, 43);
doarc(8, -75, 71, 79, 52);
doarc(8, -70, 89, 94, 62);
doarc(8, -65, 81, 83, 50);
doarc(8, -60, 70, 49, 28);
doarc(8, -55, 70, 36, 35);
doarc(8, -50, 52, 19, 30);
doarc(8, -45, 69, 29, 30);
doarc(8, -40, 55, 24, 22);
doarc(8, -35, 50, 24, 25);
doarc(8, -30, 66, 39, 28);
doarc(8, -25, 70, 31, 1);
doarc(8, -20, 232, 197, 113);
doarc(8, -15, 250, 213, 123);
doarc(8, -10, 246, 220, 126);
doarc(8, -5, 231, 198, 109);
doarc(8, 0, 121, 124, 77);
led_on();
doarc(8, 5, 125, 125, 81);
doarc(8, 10, 80, 45, 12);
doarc(8, 15, 105, 63, 15);
doarc(8, 20, 167, 127, 56);
doarc(8, 25, 214, 177, 89);
doarc(8, 30, 229, 191, 107);
doarc(8, 35, 205, 165, 80);
doarc(8, 40, 189, 148, 68);
doarc(8, 45, 180, 138, 66);
doarc(8, 50, 51, 23, 30);
doarc(8, 55, 92, 65, 51);
doarc(8, 60, 78, 64, 37);
doarc(8, 65, 144, 152, 92);
doarc(8, 70, 130, 123, 79);
doarc(8, 75, 165, 159, 93);
doarc(8, 80, 167, 162, 99);
doarc(8, 85, 99, 99, 50);
doarc(8, 90, 98, 101, 62);
doarc(8, 95, 72, 89, 61);
doarc(8, 100, 81, 102, 71);
doarc(8, 105, 88, 118, 78);
doarc(8, 110, 72, 89, 73);
doarc(8, 115, 80, 87, 70);
doarc(8, 120, 67, 78, 53);
doarc(8, 125, 19, 7, 19);
doarc(8, 130, 25, 12, 23);
doarc(8, 135, 23, 11, 25);
doarc(8, 140, 16, 5, 19);
doarc(8, 145, 25, 9, 20);
doarc(8, 150, 20, 6, 17);
doarc(8, 155, 28, 11, 15);
doarc(8, 160, 34, 19, 26);
doarc(8, 165, 46, 29, 29);
doarc(8, 170, 73, 43, 33);
doarc(8, 175, 154, 149, 81);
doarc(8, 180, 114, 124, 73);
led_off();
doarc(7, -180, 135, 144, 95);
doarc(7, -175, 136, 88, 17);
doarc(7, -170, 177, 126, 61);
doarc(7, -165, 156, 110, 35);
doarc(7, -160, 112, 65, 11);
doarc(7, -155, 94, 52, 32);
doarc(7, -150, 80, 44, 30);
doarc(7, -145, 57, 23, 19);
doarc(7, -140, 74, 44, 30);
doarc(7, -135, 46, 25, 28);
doarc(7, -130, 49, 31, 27);
doarc(7, -125, 27, 14, 23);
doarc(7, -120, 45, 44, 49);
doarc(7, -115, 82, 91, 76);
doarc(7, -110, 47, 49, 34);
doarc(7, -105, 64, 79, 62);
doarc(7, -100, 60, 86, 69);
doarc(7, -95, 74, 92, 72);
doarc(7, -90, 96, 93, 74);
doarc(7, -85, 60, 59, 41);
doarc(7, -80, 120, 124, 107);
doarc(7, -75, 95, 90, 69);
doarc(7, -70, 75, 77, 54);
doarc(7, -65, 118, 121, 86);
doarc(7, -60, 93, 105, 83);
doarc(7, -55, 89, 102, 76);
doarc(7, -50, 47, 29, 32);
doarc(7, -45, 43, 12, 20);
doarc(7, -40, 45, 19, 30);
doarc(7, -35, 51, 19, 29);
doarc(7, -30, 63, 35, 32);
doarc(7, -25, 142, 91, 40);
doarc(7, -20, 225, 189, 101);
doarc(7, -15, 228, 189, 95);
doarc(7, -10, 212, 176, 80);
doarc(7, -5, 239, 203, 104);
doarc(7, 0, 131, 135, 84);
led_on();
doarc(7, 5, 148, 146, 91);
doarc(7, 10, 144, 141, 86);
doarc(7, 15, 78, 48, 13);
doarc(7, 20, 98, 68, 30);
doarc(7, 25, 102, 67, 30);
doarc(7, 30, 136, 97, 36);
doarc(7, 35, 103, 65, 27);
doarc(7, 40, 61, 31, 24);
doarc(7, 45, 98, 61, 25);
doarc(7, 50, 157, 132, 75);
doarc(7, 55, 174, 171, 117);
doarc(7, 60, 184, 181, 110);
doarc(7, 65, 173, 167, 114);
doarc(7, 70, 176, 178, 115);
doarc(7, 75, 160, 165, 111);
doarc(7, 80, 123, 130, 83);
doarc(7, 85, 127, 125, 75);
doarc(7, 90, 103, 104, 69);
doarc(7, 95, 108, 129, 98);
doarc(7, 100, 104, 124, 90);
doarc(7, 105, 51, 78, 50);
doarc(7, 110, 116, 122, 80);
doarc(7, 115, 111, 115, 72);
doarc(7, 120, 116, 114, 77);
doarc(7, 125, 109, 122, 85);
doarc(7, 130, 6, 2, 2);
doarc(7, 135, 24, 12, 24);
doarc(7, 140, 20, 10, 20);
doarc(7, 145, 22, 11, 24);
doarc(7, 150, 25, 9, 25);
doarc(7, 155, 34, 16, 22);
doarc(7, 160, 36, 19, 30);
doarc(7, 165, 23, 11, 13);
doarc(7, 170, 137, 135, 78);
doarc(7, 175, 124, 134, 82);
doarc(7, 180, 135, 144, 95);
led_off();
doarc(6, -180, 123, 141, 100);
doarc(6, -175, 70, 29, 17);
doarc(6, -170, 99, 50, 20);
doarc(6, -165, 78, 32, 13);
doarc(6, -160, 70, 25, 21);
doarc(6, -155, 96, 55, 28);
doarc(6, -150, 132, 89, 50);
doarc(6, -145, 104, 71, 51);
doarc(6, -140, 66, 39, 22);
doarc(6, -135, 53, 27, 19);
doarc(6, -130, 19, 7, 16);
doarc(6, -125, 27, 20, 33);
doarc(6, -120, 35, 39, 33);
doarc(6, -115, 75, 89, 67);
doarc(6, -110, 51, 70, 49);
doarc(6, -105, 81, 92, 69);
doarc(6, -100, 103, 95, 57);
doarc(6, -95, 61, 75, 49);
doarc(6, -90, 60, 67, 50);
doarc(6, -85, 46, 54, 39);
doarc(6, -80, 68, 73, 59);
doarc(6, -75, 120, 139, 117);
doarc(6, -70, 104, 110, 77);
doarc(6, -65, 108, 120, 95);
doarc(6, -60, 101, 104, 76);
doarc(6, -55, 109, 120, 95);
doarc(6, -50, 56, 45, 16);
doarc(6, -45, 61, 45, 32);
doarc(6, -40, 28, 15, 25);
doarc(6, -35, 43, 13, 19);
doarc(6, -30, 56, 24, 29);
doarc(6, -25, 57, 26, 22);
doarc(6, -20, 93, 47, 26);
doarc(6, -15, 126, 68, 12);
doarc(6, -10, 229, 193, 106);
doarc(6, -5, 217, 179, 79);
doarc(6, 0, 136, 139, 82);
led_on();
doarc(6, 5, 147, 151, 92);
doarc(6, 10, 126, 132, 90);
doarc(6, 15, 141, 143, 92);
doarc(6, 20, 152, 155, 99);
doarc(6, 25, 131, 141, 91);
doarc(6, 30, 148, 156, 108);
doarc(6, 35, 161, 168, 127);
doarc(6, 40, 147, 152, 102);
doarc(6, 45, 143, 152, 111);
doarc(6, 50, 178, 187, 145);
doarc(6, 55, 155, 157, 94);
doarc(6, 60, 175, 173, 114);
doarc(6, 65, 159, 164, 111);
doarc(6, 70, 173, 175, 126);
doarc(6, 75, 172, 180, 139);
doarc(6, 80, 156, 160, 114);
doarc(6, 85, 157, 153, 95);
doarc(6, 90, 131, 135, 75);
doarc(6, 95, 110, 125, 82);
doarc(6, 100, 122, 139, 87);
doarc(6, 105, 128, 146, 92);
doarc(6, 110, 126, 152, 111);
doarc(6, 115, 95, 109, 65);
doarc(6, 120, 135, 136, 88);
doarc(6, 125, 151, 154, 99);
doarc(6, 130, 124, 130, 82);
doarc(6, 135, 145, 157, 107);
doarc(6, 140, 158, 170, 120);
doarc(6, 145, 140, 149, 104);
doarc(6, 150, 162, 161, 95);
doarc(6, 155, 141, 145, 86);
doarc(6, 160, 132, 140, 83);
doarc(6, 165, 128, 134, 86);
doarc(6, 170, 130, 140, 87);
doarc(6, 175, 131, 138, 81);
doarc(6, 180, 123, 141, 100);
led_off();
doarc(5, -180, 127, 139, 90);
doarc(5, -175, 150, 111, 44);
doarc(5, -170, 84, 54, 33);
doarc(5, -165, 53, 31, 24);
doarc(5, -160, 43, 19, 13);
doarc(5, -155, 55, 34, 32);
doarc(5, -150, 40, 18, 24);
doarc(5, -145, 45, 30, 37);
doarc(5, -140, 46, 24, 26);
doarc(5, -135, 29, 9, 18);
doarc(5, -130, 53, 36, 42);
doarc(5, -125, 31, 21, 30);
doarc(5, -120, 40, 37, 32);
doarc(5, -115, 36, 33, 20);
doarc(5, -110, 55, 56, 35);
doarc(5, -105, 69, 75, 47);
doarc(5, -100, 113, 120, 80);
doarc(5, -95, 81, 99, 77);
doarc(5, -90, 91, 94, 71);
doarc(5, -85, 76, 88, 62);
doarc(5, -80, 90, 97, 73);
doarc(5, -75, 104, 111, 88);
doarc(5, -70, 108, 117, 87);
doarc(5, -65, 58, 40, 21);
doarc(5, -60, 109, 97, 87);
doarc(5, -55, 99, 84, 56);
doarc(5, -50, 35, 26, 11);
doarc(5, -45, 45, 29, 20);
doarc(5, -40, 70, 51, 47);
doarc(5, -35, 24, 8, 20);
doarc(5, -30, 24, 8, 21);
doarc(5, -25, 39, 18, 26);
doarc(5, -20, 43, 14, 19);
doarc(5, -15, 93, 47, 28);
doarc(5, -10, 101, 52, 0);
doarc(5, -5, 154, 102, 31);
doarc(5, 0, 134, 144, 84);
led_on();
doarc(5, 5, 141, 146, 89);
doarc(5, 10, 125, 131, 78);
doarc(5, 15, 130, 135, 72);
doarc(5, 20, 168, 165, 94);
doarc(5, 25, 154, 156, 91);
doarc(5, 30, 134, 142, 86);
doarc(5, 35, 155, 154, 97);
doarc(5, 40, 164, 164, 102);
doarc(5, 45, 150, 150, 90);
doarc(5, 50, 155, 151, 80);
doarc(5, 55, 168, 169, 109);
doarc(5, 60, 161, 165, 113);
doarc(5, 65, 162, 171, 127);
doarc(5, 70, 137, 143, 95);
doarc(5, 75, 155, 155, 95);
doarc(5, 80, 154, 146, 74);
doarc(5, 85, 176, 177, 119);
doarc(5, 90, 163, 164, 101);
doarc(5, 95, 161, 161, 91);
doarc(5, 100, 151, 165, 115);
doarc(5, 105, 164, 166, 105);
doarc(5, 110, 146, 159, 105);
doarc(5, 115, 155, 156, 91);
doarc(5, 120, 119, 123, 73);
doarc(5, 125, 148, 159, 111);
doarc(5, 130, 109, 118, 71);
doarc(5, 135, 126, 135, 91);
doarc(5, 140, 147, 165, 123);
doarc(5, 145, 113, 126, 83);
doarc(5, 150, 141, 154, 101);
doarc(5, 155, 118, 126, 74);
doarc(5, 160, 140, 149, 95);
doarc(5, 165, 126, 134, 82);
doarc(5, 170, 141, 151, 97);
doarc(5, 175, 121, 132, 72);
doarc(5, 180, 127, 139, 90);
led_off();
doarc(4, -180, 117, 126, 77);
doarc(4, -175, 172, 133, 63);
doarc(4, -170, 113, 68, 3);
doarc(4, -165, 91, 56, 32);
doarc(4, -160, 122, 90, 71);
doarc(4, -155, 53, 28, 30);
doarc(4, -150, 50, 20, 22);
doarc(4, -145, 49, 20, 23);
doarc(4, -140, 43, 22, 32);
doarc(4, -135, 44, 22, 26);
doarc(4, -130, 58, 29, 33);
doarc(4, -125, 29, 8, 10);
doarc(4, -120, 103, 86, 68);
doarc(4, -115, 45, 42, 27);
doarc(4, -110, 56, 53, 38);
doarc(4, -105, 49, 46, 32);
doarc(4, -100, 49, 50, 33);
doarc(4, -95, 48, 49, 31);
doarc(4, -90, 92, 71, 40);
doarc(4, -85, 124, 104, 56);
doarc(4, -80, 86, 67, 36);
doarc(4, -75, 58, 43, 40);
doarc(4, -70, 90, 65, 49);
doarc(4, -65, 45, 38, 29);
doarc(4, -60, 46, 32, 29);
doarc(4, -55, 41, 27, 22);
doarc(4, -50, 32, 14, 14);
doarc(4, -45, 99, 77, 53);
doarc(4, -40, 59, 42, 24);
doarc(4, -35, 78, 51, 34);
doarc(4, -30, 85, 50, 27);
doarc(4, -25, 38, 25, 41);
doarc(4, -20, 35, 14, 21);
doarc(4, -15, 37, 19, 25);
doarc(4, -10, 39, 19, 25);
doarc(4, -5, 50, 24, 33);
doarc(4, 0, 132, 143, 91);
led_on();
doarc(4, 5, 136, 142, 82);
doarc(4, 10, 134, 140, 78);
doarc(4, 15, 121, 124, 67);
doarc(4, 20, 136, 141, 82);
doarc(4, 25, 135, 140, 85);
doarc(4, 30, 133, 138, 80);
doarc(4, 35, 149, 149, 89);
doarc(4, 40, 147, 149, 99);
doarc(4, 45, 155, 160, 102);
doarc(4, 50, 155, 156, 99);
doarc(4, 55, 152, 153, 95);
doarc(4, 60, 160, 159, 105);
doarc(4, 65, 162, 165, 110);
doarc(4, 70, 169, 169, 109);
doarc(4, 75, 165, 165, 105);
doarc(4, 80, 157, 158, 100);
doarc(4, 85, 166, 167, 107);
doarc(4, 90, 147, 148, 88);
doarc(4, 95, 144, 150, 97);
doarc(4, 100, 153, 160, 117);
doarc(4, 105, 150, 155, 99);
doarc(4, 110, 152, 158, 98);
doarc(4, 115, 171, 176, 118);
doarc(4, 120, 146, 149, 95);
doarc(4, 125, 123, 132, 73);
doarc(4, 130, 133, 139, 88);
doarc(4, 135, 145, 152, 100);
doarc(4, 140, 140, 146, 92);
doarc(4, 145, 118, 126, 77);
doarc(4, 150, 136, 142, 88);
doarc(4, 155, 128, 138, 86);
doarc(4, 160, 122, 123, 64);
doarc(4, 165, 138, 145, 91);
doarc(4, 170, 117, 122, 68);
doarc(4, 175, 127, 136, 81);
doarc(4, 180, 117, 126, 77);
led_off();
doarc(3, -180, 98, 105, 51);
doarc(3, -175, 140, 101, 37);
doarc(3, -170, 149, 115, 59);
doarc(3, -165, 120, 79, 28);
doarc(3, -160, 147, 111, 54);
doarc(3, -155, 89, 56, 39);
doarc(3, -150, 137, 107, 81);
doarc(3, -145, 103, 71, 47);
doarc(3, -140, 72, 43, 38);
doarc(3, -135, 85, 59, 60);
doarc(3, -130, 62, 33, 40);
doarc(3, -125, 68, 48, 58);
doarc(3, -120, 33, 21, 8);
doarc(3, -115, 54, 43, 30);
doarc(3, -110, 96, 86, 54);
doarc(3, -105, 85, 80, 36);
doarc(3, -100, 133, 119, 66);
doarc(3, -95, 176, 154, 95);
doarc(3, -90, 118, 95, 55);
doarc(3, -85, 126, 103, 58);
doarc(3, -80, 82, 61, 33);
doarc(3, -75, 87, 69, 52);
doarc(3, -70, 56, 37, 27);
doarc(3, -65, 76, 57, 43);
doarc(3, -60, 80, 60, 33);
doarc(3, -55, 93, 73, 42);
doarc(3, -50, 91, 65, 41);
doarc(3, -45, 83, 60, 46);
doarc(3, -40, 62, 40, 19);
doarc(3, -35, 87, 56, 27);
doarc(3, -30, 102, 69, 34);
doarc(3, -25, 49, 22, 26);
doarc(3, -20, 19, 7, 22);
doarc(3, -15, 39, 19, 31);
doarc(3, -10, 29, 14, 20);
doarc(3, -5, 40, 23, 33);
doarc(3, 0, 129, 139, 87);
led_on();
doarc(3, 5, 107, 115, 58);
doarc(3, 10, 143, 151, 92);
doarc(3, 15, 142, 150, 90);
doarc(3, 20, 131, 140, 85);
doarc(3, 25, 124, 133, 80);
doarc(3, 30, 148, 149, 90);
doarc(3, 35, 142, 146, 86);
doarc(3, 40, 136, 143, 91);
doarc(3, 45, 124, 128, 74);
doarc(3, 50, 144, 148, 93);
doarc(3, 55, 158, 167, 114);
doarc(3, 60, 155, 160, 112);
doarc(3, 65, 138, 143, 92);
doarc(3, 70, 164, 164, 108);
doarc(3, 75, 142, 150, 100);
doarc(3, 80, 149, 152, 93);
doarc(3, 85, 138, 142, 84);
doarc(3, 90, 164, 162, 106);
doarc(3, 95, 148, 153, 95);
doarc(3, 100, 142, 150, 102);
doarc(3, 105, 137, 146, 94);
doarc(3, 110, 151, 163, 115);
doarc(3, 115, 125, 132, 88);
doarc(3, 120, 158, 168, 114);
doarc(3, 125, 130, 140, 103);
doarc(3, 130, 113, 124, 68);
doarc(3, 135, 132, 141, 95);
doarc(3, 140, 84, 94, 42);
doarc(3, 145, 130, 140, 90);
doarc(3, 150, 138, 140, 87);
doarc(3, 155, 133, 137, 85);
doarc(3, 160, 133, 136, 79);
doarc(3, 165, 122, 126, 70);
doarc(3, 170, 109, 110, 49);
doarc(3, 175, 114, 114, 57);
doarc(3, 180, 98, 105, 51);
led_off();
doarc(2, -180, 124, 131, 82);
doarc(2, -175, 53, 24, 13);
doarc(2, -170, 112, 83, 71);
doarc(2, -165, 104, 69, 31);
doarc(2, -160, 100, 73, 42);
doarc(2, -155, 96, 63, 51);
doarc(2, -150, 80, 46, 5);
doarc(2, -145, 62, 32, 23);
doarc(2, -140, 29, 12, 15);
doarc(2, -135, 40, 21, 30);
doarc(2, -130, 40, 21, 26);
doarc(2, -125, 58, 34, 41);
doarc(2, -120, 48, 23, 30);
doarc(2, -115, 49, 36, 23);
doarc(2, -110, 59, 42, 21);
doarc(2, -105, 94, 76, 35);
doarc(2, -100, 98, 80, 40);
doarc(2, -95, 91, 71, 27);
doarc(2, -90, 105, 73, 34);
doarc(2, -85, 92, 60, 34);
doarc(2, -80, 126, 95, 59);
doarc(2, -75, 113, 76, 48);
doarc(2, -70, 91, 58, 25);
doarc(2, -65, 96, 62, 34);
doarc(2, -60, 91, 64, 37);
doarc(2, -55, 56, 32, 15);
doarc(2, -50, 103, 78, 47);
doarc(2, -45, 106, 81, 43);
doarc(2, -40, 94, 64, 30);
doarc(2, -35, 124, 87, 35);
doarc(2, -30, 111, 73, 33);
doarc(2, -25, 118, 72, 27);
doarc(2, -20, 116, 74, 46);
doarc(2, -15, 68, 33, 23);
doarc(2, -10, 44, 27, 45);
doarc(2, -5, 53, 38, 51);
doarc(2, 0, 135, 138, 83);
led_on();
doarc(2, 5, 136, 139, 84);
doarc(2, 10, 128, 135, 81);
doarc(2, 15, 128, 136, 79);
doarc(2, 20, 136, 143, 89);
doarc(2, 25, 117, 122, 66);
doarc(2, 30, 135, 143, 92);
doarc(2, 35, 143, 149, 95);
doarc(2, 40, 137, 144, 93);
doarc(2, 45, 143, 148, 93);
doarc(2, 50, 141, 143, 86);
doarc(2, 55, 113, 117, 66);
doarc(2, 60, 133, 140, 87);
doarc(2, 65, 152, 156, 104);
doarc(2, 70, 138, 143, 90);
doarc(2, 75, 158, 164, 118);
doarc(2, 80, 118, 121, 70);
doarc(2, 85, 130, 135, 79);
doarc(2, 90, 153, 159, 108);
doarc(2, 95, 132, 141, 89);
doarc(2, 100, 144, 153, 97);
doarc(2, 105, 140, 153, 99);
doarc(2, 110, 143, 157, 110);
doarc(2, 115, 145, 155, 107);
doarc(2, 120, 138, 153, 109);
doarc(2, 125, 159, 167, 122);
doarc(2, 130, 117, 124, 75);
doarc(2, 135, 120, 127, 75);
doarc(2, 140, 142, 148, 104);
doarc(2, 145, 108, 117, 66);
doarc(2, 150, 118, 122, 71);
doarc(2, 155, 139, 147, 96);
doarc(2, 160, 111, 118, 66);
doarc(2, 165, 128, 135, 83);
doarc(2, 170, 137, 140, 87);
doarc(2, 175, 116, 121, 67);
doarc(2, 180, 124, 131, 82);
led_off();
doarc(1, -180, 127, 135, 86);
doarc(1, -175, 42, 25, 34);
doarc(1, -170, 23, 9, 20);
doarc(1, -165, 24, 11, 26);
doarc(1, -160, 36, 20, 31);
doarc(1, -155, 58, 42, 53);
doarc(1, -150, 45, 24, 30);
doarc(1, -145, 63, 43, 44);
doarc(1, -140, 54, 35, 37);
doarc(1, -135, 43, 22, 28);
doarc(1, -130, 68, 43, 38);
doarc(1, -125, 65, 39, 38);
doarc(1, -120, 35, 13, 21);
doarc(1, -115, 29, 16, 29);
doarc(1, -110, 35, 22, 36);
doarc(1, -105, 25, 10, 19);
doarc(1, -100, 26, 14, 23);
doarc(1, -95, 37, 25, 35);
doarc(1, -90, 129, 108, 38);
doarc(1, -85, 127, 106, 35);
doarc(1, -80, 94, 71, 23);
doarc(1, -75, 118, 96, 39);
doarc(1, -70, 125, 96, 43);
doarc(1, -65, 132, 106, 47);
doarc(1, -60, 127, 103, 57);
doarc(1, -55, 73, 42, 0);
doarc(1, -50, 101, 72, 30);
doarc(1, -45, 112, 93, 40);
doarc(1, -40, 109, 88, 37);
doarc(1, -35, 132, 102, 59);
doarc(1, -30, 111, 76, 29);
doarc(1, -25, 100, 65, 12);
doarc(1, -20, 135, 104, 49);
doarc(1, -15, 136, 105, 43);
doarc(1, -10, 131, 98, 39);
doarc(1, -5, 127, 91, 43);
doarc(1, 0, 134, 148, 99);
led_on();
doarc(1, 5, 124, 136, 88);
doarc(1, 10, 125, 143, 95);
doarc(1, 15, 135, 147, 103);
doarc(1, 20, 128, 137, 94);
doarc(1, 25, 133, 147, 98);
doarc(1, 30, 136, 143, 91);
doarc(1, 35, 134, 141, 87);
doarc(1, 40, 125, 134, 80);
doarc(1, 45, 134, 144, 91);
doarc(1, 50, 113, 120, 68);
doarc(1, 55, 141, 148, 94);
doarc(1, 60, 137, 147, 97);
doarc(1, 65, 137, 145, 96);
doarc(1, 70, 133, 140, 91);
doarc(1, 75, 136, 140, 84);
doarc(1, 80, 138, 140, 84);
doarc(1, 85, 133, 141, 90);
doarc(1, 90, 134, 143, 94);
doarc(1, 95, 135, 143, 93);
doarc(1, 100, 118, 122, 70);
doarc(1, 105, 118, 124, 73);
doarc(1, 110, 128, 139, 92);
doarc(1, 115, 130, 144, 102);
doarc(1, 120, 124, 130, 85);
doarc(1, 125, 152, 153, 100);
doarc(1, 130, 140, 143, 88);
doarc(1, 135, 141, 148, 97);
doarc(1, 140, 135, 141, 96);
doarc(1, 145, 154, 160, 116);
doarc(1, 150, 134, 142, 95);
doarc(1, 155, 128, 136, 87);
doarc(1, 160, 104, 110, 62);
doarc(1, 165, 128, 131, 84);
doarc(1, 170, 128, 135, 84);
doarc(1, 175, 144, 151, 100);
doarc(1, 180, 127, 135, 86);
led_off();
}

void loop() {
  /*
  for (float i = 0.1; i < 1.0; i += 0.01) {
    move_to_polar(i, 35);
    delay(50);
  }*/
}
